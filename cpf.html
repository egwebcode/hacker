<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>CONSULTAR CPF & ENDEREÃ‡O</title>

  <style>
    body{
      font-family:system-ui,Segoe UI,Roboto,Arial;
      background:url("fundo.png") no-repeat center center fixed;
      background-size:cover;
      color:#111;
      display:flex;
      align-items:center;
      justify-content:center;
      height:100vh;
      margin:0;
    }
    .box{
      background:#fff; /* ERRO CORRIGIDO */
      padding:18px;
      border-radius:10px;
      box-shadow:0 8px 30px rgba(20,20,30,0.06);
      width:420px;
      max-height:90vh;
      overflow:auto;
    }
    input{width:100%;padding:10px;border-radius:8px;border:1px solid #ddd;font-size:15px}
    button{margin-top:10px;padding:10px 12px;border-radius:8px;border:0;background:#0b76ff;color:#fff;font-weight:700;cursor:pointer;width:100%}
    button.secondary{background:#34c759;margin-top:5px}
    pre{
      background:#0b1220;
      color:#e6eef8;
      padding:10px;
      border-radius:8px;
      margin-top:12px;
      white-space:pre-wrap;
      word-break:break-word;
      display:none;
    }
  </style>
</head>

<body>
<div class="box">

  <label style="font-size:13px;color:#666">CPF</label>
  <input id="cpf" type="text"/>

  <button id="consultBtn">Consultar Tudo</button>
  <button id="showJsonBtn" class="secondary">Ver JSON</button>

  <pre id="rawJson"></pre>
</div>

<script>
const rawJson = document.getElementById('rawJson');

async function consultarTudo(cpf){
  if(!cpf){
    alert('Digite o CPF!');
    return;
  }

  rawJson.style.display = 'block';
  rawJson.textContent = 'Consultando...';

  const payloadValidate = { number: String(cpf).trim(), captcha_token: "" };
  const payloadAddress = { cpf: String(cpf).trim() };

  try{
    const resValidate = await fetch(
      'https://corsproxy.io/?https://donald.bet.br/api/documents/validate',
      {
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body: JSON.stringify(payloadValidate)
      }
    );
    const dataValidate = await resValidate.json();

    const resAddress = await fetch(
      'https://corsproxy.io/?https://bateu.bet.br/api/bff/address-by-cpf',
      {
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body: JSON.stringify(payloadAddress)
      }
    );
    const dataAddress = await resAddress.json();

    const finalJson = {
      validate: dataValidate,
      address: dataAddress
    };

    console.log(finalJson);
    rawJson.textContent = JSON.stringify(finalJson, null, 2);

  }catch(err){
    rawJson.textContent = JSON.stringify({ error:String(err) }, null, 2);
  }
}

document.getElementById('consultBtn').onclick = function(){
  consultarTudo(document.getElementById('cpf').value);
};

document.getElementById('showJsonBtn').onclick = function(){
  rawJson.style.display = rawJson.style.display === 'none' ? 'block' : 'none';
};
</script>

</body>
</html>